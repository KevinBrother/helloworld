# nodejs的进程和线程

## 进程

- 每个进程之间数据，内存都独立，不能直接互相访问，除非建立IPC通信

## 线程

- 线程是操作系统能调度的最小单位

## 线程和进程的关系

- 一个线程只能存在一个进程中，一个进程可以有多个线程
- 同一个进程的线程共享改进程的所有资源，包括内存空间，调用站等

# 扩展

## 线程、操作系统、cpu之间的关系

- 操作系统和CPU都有线程的概念。
  - CPU的线程是物理上面的概念可以理解为工人的数量，比如2和4线程就是有4个工人
  - 操作系统的线程是软件层面的，可以一直创建，表示希望有多少个工人来同时干活，比如创建了8个线程（fork个8次，js一个单线程，所以一个进程就只有一个线程），但是实际干活的人只有4个

## 并发和并行的关系

- 并行是同时进行。打电话的时候吃饭、四个工人同时干各自的四件事
- 并发是交替进程。一个一会跳舞，一会打球，在一会跳舞。只要切换的足够快，就像是同时在做一样。（CPU就是足够的快，等待各线程的IO）
- nodejs开启多进程，不是为了解决并发问题，而是为了解决单进程的nodejs的CPU利用率不足的情况，充分利用CPU多性能

## 命令

```bash
  ps -ef | grep xxxpid
```

## doc

[Node.js进阶之进程与线程](https://mp.weixin.qq.com/s?__biz=MzIyNDU2NTc5Mw==&mid=2247483699&idx=1&sn=a64b349baa8662c27ac211de130eb28b&chksm=e80c4e7ddf7bc76b7869f74605588a6bd3f6a960d9cb19b1a9c4e3518156092c9fc25bf74d54&scene=21#wechat_redirect)
[10 道 Nodejs 进程相关面试题](https://mp.weixin.qq.com/s/dKN95zcRI7qkwGYKhPXrcg)
