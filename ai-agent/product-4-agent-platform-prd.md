# 产品需求文档 (PRD)：AgentForge - 低代码 Agent 构建平台

> **生成时间**：2025-02-16
> **基于路线图**：Agent 应用开发（JS/TS 路线）
> **产品阶段**：概念阶段（高难度，长期规划）

---

## 一、执行摘要

### 1.1 产品概述

| 项目 | 内容 |
|------|------|
| **产品名称** | AgentForge (智体工坊) |
| **一句话描述** | 让非技术人员也能创建 AI Agent 的低代码平台 |
| **核心价值** | 拖拽式搭建、可视化编排、一键部署——AI 应用开发的 WordPress |
| **目标用户** | 业务人员、PM、小企业主、创业者、无技术团队 |
| **当前阶段**：概念验证 |

### 1.2 产品定位图

```
┌─────────────────────────────────────────────────────────┐
│                         用户痛点                          │
├─────────────────────────────────────────────────────────┤
│ • 有 AI 应用想法但无技术团队                              │
│ • 外包开发成本高、周期长、沟通困难                        │
│ • 现有 Agent 平台（如 Dify）学习曲线陡峭                  │
│ • 业务变化快，需要快速调整 Agent 逻辑                     │
│ • 想要自动化工作流但不会编程                              │
└─────────────────────────────────────────────────────────┘
                            ↓ 低代码解决
┌─────────────────────────────────────────────────────────┐
│                         AgentForge 方案                  │
├─────────────────────────────────────────────────────────┤
│ • 拖拽式组件库（LLM、工具、数据库、API）                  │
│ • 可视化流程编排（类似 Node-RED）                         │
│ • 自然语言定义 Agent 行为                                 │
│ • 一键部署到 Web/微信/钉钉                                │
│ • 预置模板库（客服、销售、分析等）                         │
└─────────────────────────────────────────────────────────┘
                            ↓ 创造
┌─────────────────────────────────────────────────────────┐
│                         用户价值                          │
├─────────────────────────────────────────────────────────┤
│ • 开发门槛降低 95%，业务人员可直接操作                    │
│ • 开发周期从月级缩短到天级甚至小时级                      │
│ • 成本降低 90%，相比外包开发                              │
│ • 快速迭代，实时调整业务逻辑                              │
└─────────────────────────────────────────────────────────┘
```

### 1.3 验证学习的核心技能

| 学习路线技能 | 产品中的应用形式 | 验收方式 |
|-------------|-----------------|---------|
| **Agent 编排** | 可视化流程编排引擎 | 用户能拖拽创建复杂 Agent |
| **Function Calling** | 工具节点封装与调用 | 工具库可扩展 |
| **多 Agent 协作** | 多个 Agent 协同工作 | 支持子 Agent 调用 |
| **记忆系统** | 记忆节点、会话管理 | Agent 能记住上下文 |
| **LLM 调用** | LLM 节点配置 | 支持多种 LLM |
| **流式输出** | 实时响应展示 | 终端用户看到实时输出 |

---

## 二、市场分析

### 2.1 目标市场

**一级市场（核心市场）**
- **定义**：有数字化需求但无技术团队的小微企业
- **规模**：中国约 4000 万小微企业，有 AI 自动化需求的约 2%
- **特征**：预算有限但需求明确，愿意为效率付费

**二级市场（扩展市场）**
- **定义**：业务人员、PM、运营人员
- **规模**：约 1000 万潜在用户
- **特征**：有技术理解能力，希望快速实现想法

### 2.2 竞品分析

| 竞品 | 核心功能 | 定价 | 优势 | 劣势 | 我们的差异化 |
|------|---------|------|------|------|-------------|
| **Dify** | LLM 应用开发 | 开源/云版 | 功能强大、开源 | 有技术门槛 | 零代码、更简单 |
| **FastGPT** | 知识库编排 | 开源/云版 | 国内化好 | 专注知识库 | 通用 Agent 平台 |
| **Coze (扣子)** | Bot 开发 | 免费 | 字节背书、流量入口 | 依赖字节生态 | 独立部署、数据私有 |
| **GooAI** | 工作流自动化 | 按次收费 | UI 漂亮 | 功能有限 | 更强的编排能力 |
| **Flowise** | LangChain 可视化 | 开源 | 开源生态 | 需要技术背景 | 业务友好 |

### 2.3 SWOT 分析

```
         内部因素                          外部环境
            ↓                                 ↓
┌───────────────────┐              ┌───────────────────┐
│  Strengths (优势)  │              │  Opportunities    │
│  • 全栈开发能力    │              │  • AI 应用爆发    │
│  • 前端经验丰富    │              │  • 低代码趋势     │
│  • RPA/工作流理解  │              │  • 企业数字化转型 │
│  • 本地部署能力    │              │  • 垂直行业机会   │
└───────────────────┘              └───────────────────┘

┌───────────────────┐              ┌───────────────────┐
│  Weaknesses (劣势) │              │  Threats (威胁)   │
│  • 平台级复杂度    │              │  • 大厂竞品免费化 │
│  • 单人开发挑战    │              │  • 技术门槛降低   │
│  • 运营资源不足    │              │  • 开源竞品挤压   │
│  • 商业验证周期长  │              │  • 用户教育成本   │
└───────────────────┘              └───────────────────┘
```

---

## 三、产品功能

### 3.1 功能优先级矩阵

| 优先级 | 功能模块 | 描述 | 对应技能 | 开发估时 |
|--------|---------|------|---------|---------|
| 🔴 P0 | 可视化编辑器 | 拖拽式节点编辑器 | 前端开发 | 10天 |
| 🔴 P0 | LLM 节点 | 配置 LLM、Prompt、参数 | LLM 调用 | 4天 |
| 🔴 P0 | 工具节点 | 内置工具（搜索、API、数据库） | Function Calling | 6天 |
| 🔴 P0 | 流程执行引擎 | 执行编排好的流程 | Agent 编排 | 8天 |
| 🟡 P1 | 记忆节点 | 对话记忆、长期记忆 | 记忆系统 | 5天 |
| 🟡 P1 | 模板库 | 预置 Agent 模板 | - | 7天 |
| 🟡 P1 | 一键部署 | 部署到 Web/小程序/企业微信 | 部署能力 | 8天 |
| 🟢 P2 | 子 Agent | Agent 嵌套与调用 | 多 Agent 协作 | 6天 |
| 🟢 P2 | 数据库节点 | 可视化数据存储与查询 | - | 5天 |

### 3.2 MVP 功能范围（P0）

**MVP 目标**：验证「可视化 Agent 开发」的可行性——拖拽节点，运行 Agent

| 功能 | 用户故事 | 验收标准 | 技术实现要点 |
|------|---------|---------|-------------|
| **可视化编辑器** | 作为业务人员，我希望拖拽节点来设计 Agent | 能添加、连接、配置节点 | React Flow / D3 |
| **LLM 节点** | 作为用户，我希望配置 AI 对话节点 | 能选择模型、输入 Prompt | LLM API 集成 |
| **工具节点** | 作为用户，我希望调用外部 API | 能配置 HTTP 请求 | Fetch + 参数映射 |
| **流程执行** | 作为用户，我希望点击运行看到结果 | 按流程顺序执行，显示结果 | 执行引擎 + 流式输出 |

### 3.3 后续迭代规划

**V1.0 后计划**：
- **V1.1**（MVP+4周）：记忆节点 - 会话记忆
- **V1.2**（MVP+8周）：模板库 - 常用场景模板
- **V2.0**（MVP+16周）：一键部署 - 多渠道发布
- **V3.0**（MVP+24周）：子 Agent - 复杂编排

---

## 四、用户体验设计

### 4.1 用户旅程地图

```
[注册登录] → [选择模板] → [拖拽编辑] → [配置节点] → [测试运行] → [发布部署]
    ↓           ↓            ↓            ↓            ↓            ↓
  邮箱登录    预置模板    节点画布    参数配置    一键测试    二维码分享
```

### 4.2 核心页面/交互

| 页面/交互 | 目的 | 关键元素 | 对应技能点 |
|----------|------|---------|-----------|
| **仪表盘** | Agent 管理 | Agent 卡片、运行状态、数据统计 | - |
| **编辑器** | 核心交互 | 节点面板、画布、配置面板 | 前端开发 |
| **节点配置** | 参数设置 | 模型选择、Prompt 输入、参数映射 | LLM 配置 |
| **测试预览** | 运行验证 | 对话预览、调试日志 | 流式输出 |
| **发布设置** | 部署配置 | 渠道选择、域名设置 | - |

### 4.3 用户体验原则

1. **所见即所得** - 编辑即预览
2. **渐进式复杂** - 简单场景简单配，复杂场景支持
3. **模板优先** - 新手从模板开始
4. **友好错误** - 执行失败有明确提示

---

## 五、技术架构

### 5.1 技术栈选型

| 层级 | 技术选型 | 理由 | 对应学习技能 |
|------|---------|------|-------------|
| 前端 | Next.js 14 + React Flow | 你熟悉，React Flow 适合流程图 | React 前端开发 |
| 后端 | Next.js API + Bull Queue | 全栈一体，任务队列 | Node.js 开发 |
| AI SDK | Vercel AI SDK | 路线图推荐 | LLM 调用 |
| 数据库 | PostgreSQL + Prisma | 关系型 + ORM | 你的全栈经验 |
| 部署 | Docker + Vercel | 灵活部署 | 部署经验 |
| 执行引擎 | 自研基于 DAG | 支持复杂流程 | Agent 编排 |

### 5.2 系统架构图

```
┌─────────────────────────────────────────────────────────┐
│                       用户端                             │
│              Web 编辑器 (React Flow)                     │
└─────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────┐
│                      API 层                              │
│           (Next.js API + tRPC)                          │
└─────────────────────────────────────────────────────────┘
                            ↓
┌─────────────┬─────────────┬─────────────┬─────────────┐
│  编辑器服务 │  执行引擎   │  部署服务   │  用户服务   │
│  • 保存     │  • DAG执行  │  • 构建     │  • 认证     │
│  • 版本管理 │  • 节点调度 │  • 发布     │  • 配额     │
└─────────────┴─────────────┴─────────────┴─────────────┘
       ↓              ↓              ↓              ↓
┌─────────────┬─────────────┬─────────────┬─────────────┐
│  PostgreSQL │  Redis      │  LLM APIs   │  文件存储   │
│  (Agent定义)│  (执行状态) │  (多模型)   │  (用户数据) │
└─────────────┴─────────────┴─────────────┴─────────────┘
```

### 5.3 数据模型（核心实体）

```typescript
// Agent 定义
Agent {
  id: string
  userId: string
  name: string
  description?: string
  graph: FlowGraph            // 流程图定义
  version: number
  status: 'draft' | 'published' | 'archived'
  createdAt: Date
  updatedAt: Date
}

// 流程图
FlowGraph {
  nodes: Node[]
  edges: Edge[]
  variables: Variable[]
}

// 节点
Node {
  id: string
  type: 'llm' | 'tool' | 'memory' | 'condition' | 'loop'
  position: { x: number, y: number }
  config: NodeConfig
}

// LLM 节点配置
LLMNodeConfig {
  model: string
  prompt: string
  temperature?: number
  maxTokens?: number
  inputs: Record<string, string>    // 输入映射
}

// 工具节点配置
ToolNodeConfig {
  toolType: 'http' | 'search' | 'database'
  endpoint?: string                 // HTTP 工具
  method: 'GET' | 'POST'
  headers?: Record<string, string>
  inputs: Record<string, string>
  outputs: Record<string, string>   // 输出映射
}

// 执行记录
Execution {
  id: string
  agentId: string
  status: 'running' | 'completed' | 'failed'
  input: any
  output?: any
  steps: ExecutionStep[]
  startedAt: Date
  completedAt?: Date
}
```

### 5.4 技术风险与应对

| 风险 | 可能性 | 影响 | 应对措施 |
|------|--------|------|---------|
| 执行引擎复杂度高 | 高 | 高 | 先支持简单线性流程，逐步支持 DAG |
| 节点类型扩展困难 | 中 | 中 | 插件化节点系统 |
| 并发执行性能问题 | 中 | 中 | 任务队列、水平扩展 |
| 用户学习曲线 | 高 | 高 | 模板库、教程、引导流程 |

---

## 六、商业模式

### 6.1 盈利模式

| 模式 | 描述 | 定价策略 | 目标占比 |
|------|------|---------|---------|
| **订阅制** | 按功能和执行次数收费 | 分档定价 | 60% |
| **私有化部署** | 企业版授权 | 一次性 + 维保 | 30% |
| **模板市场** | 优质模板收费 | 按次或买断 | 10% |

**推荐模式**：Freemium + 订阅升级

### 6.2 定价策略

| 套餐 | 目标用户 | 价格 | 包含功能 | 限制 |
|------|---------|------|---------|------|
| **免费版** | 个人体验 | ¥0 | • 3个Agent<br>• 100次执行/月<br>• 基础节点 | • 无私有部署 |
| **专业版** | 专业用户 | ¥199/月 | • 20个Agent<br>• 5000次执行/月<br>• 全部节点<br>• 优先执行 | • 单用户 |
| **团队版** | 小团队 | ¥599/月 | • 50个Agent<br>• 20000次执行/月<br>• 5个用户<br>• 协作功能 | - |
| **企业版** | 大企业 | ¥2999/月起 | • 不限Agent<br>• 执行次数可议<br>• 私有部署<br>• SLA | - |

### 6.3 获客策略

**有机增长**：
- **模板营销** - 发布实用模板吸引用户
- **教程内容** - "如何用 AgentForge 做XXX"
- **社区运营** - 用户分享、作品展示

**付费增长**：
- **搜索广告** - "AI Agent 开发"、"低代码平台"
- **行业会议** - 低代码、RPA、数字化相关会议

**合作伙伴**：
- **系统集成商** - 作为其 AI 能力提供方
- **SaaS 生态** - 与企业 SaaS 集成

---

## 七、运营指标

### 7.1 北极星指标

**核心指标**：月活跃 Agent 数 (Monthly Active Agents)

**原因**：反映平台创建的真实 Agent 数量，比用户数更健康

### 7.2 分阶段指标

**阶段1：MVP 验证期（0-6个月）**

| 指标类型 | 指标 | 目标值 | 当前值 |
|---------|------|--------|--------|
| 获取 | 注册用户数 | 500 | - |
| 激活 | 创建首个 Agent 比例 | 30% | - |
| 留存 | 次月留存率 | 20% | - |
| 变现 | 付费转化率 | 2% | - |

**阶段2：增长期（6-18个月）**

| 指标类型 | 指标 | 目标值 | 当前值 |
|---------|------|--------|--------|
| 获取 | 月新增用户 | 1000 | - |
| 激活 | 月活跃 Agent | 2000 | - |
| 留存 | 3月留存率 | 35% | - |
| 变现 | MRR | ¥5万 | - |

### 7.3 成本结构

| 成本项 | 月成本（¥） | 说明 |
|--------|------------|------|
| 服务器/云服务 | 5000 | 执行引擎、存储 |
| 第三方服务 | 5000 | LLM API |
| 营销推广 | 5000 | 内容、广告 |
| 其他 | 2000 | 域名、工具 |
| **合计** | **17000** | |

### 7.4 收入预测（保守/中性/乐观）

| 时间 | 保守收入 | 中性收入 | 乐观收入 | 说明 |
|------|---------|---------|---------|------|
| 月6 | ¥2,000 | ¥6,000 | ¥12,000 | 10-50个付费用户 |
| 月12 | ¥8,000 | ¥25,000 | ¥60,000 | 40-200个付费用户 |
| 月18 | ¥20,000 | ¥80,000 | ¥200,000 | 100-500个付费用户 |

---

## 八、开发计划

### 8.1 里程碑规划

| 阶段 | 目标 | 时间 | 交付物 | 状态 |
|------|------|------|--------|------|
| 概念验证 | 验证技术可行性 | Week 1-4 | 原型 Demo | ⬜ |
| MVP 开发 | 核心功能实现 | Week 5-16 | 可用版本 | ⬜ |
| 内测 | 邀请50用户测试 | Week 17-20 | 测试报告 | ⬜ |
| 公开测试 | 产品正式发布 | Week 21 | Beta 版 | ⬜ |
| 正式上线 | 稳定版本 | Week 24+ | v1.0 | ⬜ |

> **注意**：此产品复杂度较高，建议在其他产品有进展后再启动

### 8.2 技术任务分解

**Week 1-4：概念验证**
- [ ] 可视化编辑器原型（React Flow） - 5天
- [ ] 简单执行引擎 - 5天
- [ ] LLM 节点实现 - 3天
- [ ] 端到端 Demo - 3天

**Week 5-12：MVP 核心**
- [ ] 完整编辑器（对应技能：前端开发） - 10天
- [ ] 节点系统（对应技能：Function Calling） - 8天
- [ ] 执行引擎（对应技能：Agent 编排） - 10天

**Week 13-16：完善与测试**
- [ ] UI/UX 完善 - 7天
- [ ] 测试与修复 - 7天

### 8.3 技能验证检查清单

| 学习路线技能 | 产品对应功能 | 完成标准 | 验证方式 |
|-------------|-------------|---------|---------|
| **Agent 编排** | 流程执行引擎 | 能执行复杂流程 | 测试用例 |
| **Function Calling** | 工具节点 | 能调用外部 API | 集成测试 |
| **LLM 调用** | LLM 节点 | 支持多种模型 | 功能测试 |
| **流式输出** | 实时执行反馈 | 用户能看到进度 | UI 测试 |

---

## 九、风险评估

### 9.1 风险矩阵

| 风险 | 可能性 | 影响 | 风险等级 | 应对策略 |
|------|--------|------|---------|---------|
| 开发周期过长 | 高 | 高 | 🔴 | 分阶段发布、范围控制 |
| 竞品压力 | 高 | 高 | 🟡 | 差异化定位 |
| 用户教育成本 | 高 | 中 | 🟡 | 模板优先、教程完善 |
| 单人开发挑战 | 高 | 高 | 🔴 | 先做其他产品积累资源 |

### 9.2 止损条件

**项目暂停/终止的条件**：
1. **6个月无法完成 MVP** - 复杂度超预期
2. **概念验证阶段用户反馈冷淡** - 产品方向问题
3. **竞品免费且功能更强** - 竞争环境恶化

### 9.3 建议

**此产品适合作为长期目标**，建议：
1. 先完成前 3 个产品之一，积累技术和用户
2. 在其他产品中沉淀可复用的组件
3. 有资源和团队后再启动

---

## 十、附录

### 10.1 参考资料
- [React Flow 文档](https://reactflow.dev)
- [Node-RED](https://nodered.org)
- [Dify 开源项目](https://github.com/langgenius/dify)

### 10.2 术语表
| 术语 | 解释 |
|------|------|
| 低代码 | Low-Code，可视化开发，减少手写代码 |
| DAG | Directed Acyclic Graph，有向无环图 |
| 编排 | Orchestration，协调多个组件执行 |

### 10.3 变更记录

| 版本 | 日期 | 变更内容 | 负责人 |
|------|------|---------|--------|
| v1.0 | 2025-02-16 | 初始版本 | AI生成 |

---

*文档版本：v1.0 | 最后更新：2025-02-16*

---

## 产品选择建议

根据你的情况，四个产品的推荐优先级：

| 产品 | 推荐度 | 理由 |
|------|--------|------|
| **1. 智能爬虫 SaaS** | ⭐⭐⭐⭐⭐ | 充分利用爬虫经验，市场需求明确，变现路径清晰 |
| **2. 企业知识库 Agent** | ⭐⭐⭐⭐ | 结合创业项目，可复用代码，验证更快 |
| **3. 开发者工具套件** | ⭐⭐⭐⭐ | 社区友好，可建立品牌，开源+商业化双轨 |
| **4. 低代码 Agent 平台** | ⭐⭐ | 技术门槛高，开发周期长，建议作为长期目标 |

**建议**：优先从产品1或产品2开始，两者都能充分发挥你的技术优势且市场需求明确。
